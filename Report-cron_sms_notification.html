<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<style>
.AlignLeft { text-align: left; }
.AlignCenter { text-align: center; }
.AlignRight { text-align: right; }
body { font-family: sans-serif; font-size: 11pt; }
td { vertical-align: top; padding-left: 4px; padding-right: 4px; }

tr.SectionGap td { font-size: 4px; border-left: none; border-top: none; border-bottom: 1px solid Black; border-right: 1px solid Black; }
tr.SectionAll td { border-left: none; border-top: none; border-bottom: 1px solid Black; border-right: 1px solid Black; }
tr.SectionBegin td { border-left: none; border-top: none; border-right: 1px solid Black; }
tr.SectionEnd td { border-left: none; border-top: none; border-bottom: 1px solid Black; border-right: 1px solid Black; }
tr.SectionMiddle td { border-left: none; border-top: none; border-right: 1px solid Black; }
tr.SubsectionAll td { border-left: none; border-top: none; border-bottom: 1px solid Gray; border-right: 1px solid Black; }
tr.SubsectionEnd td { border-left: none; border-top: none; border-bottom: 1px solid Gray; border-right: 1px solid Black; }
table.fc { border-top: 1px solid Black; border-left: 1px solid Black; width: 100%; font-family: monospace; font-size: 10pt; }
td.TextItemInsigAdd { color: #000000; background-color: #EFEFFF; }
td.TextItemInsigDel { color: #000000; background-color: #EFEFFF; text-decoration: line-through; }
td.TextItemInsigDiffMod { color: #000000; background-color: #EFEFFF; }
td.TextItemInsigLeftMod { color: #000000; background-color: #EFEFFF; }
td.TextItemInsigRightMod { color: #000000; background-color: #EFEFFF; }
td.TextItemNum { color: #827357; background-color: #F2F2F2; }
td.TextItemSame { color: #000000; background-color: #FFFFFF; }
td.TextItemSigAdd { color: #000000; background-color: #FFE3E3; }
td.TextItemSigDel { color: #000000; background-color: #FFE3E3; text-decoration: line-through; }
td.TextItemSigDiffMod { color: #000000; background-color: #FFE3E3; }
td.TextItemSigLeftMod { color: #000000; background-color: #FFE3E3; }
td.TextItemSigRightMod { color: #000000; background-color: #FFE3E3; }
.TextSegInsigDiff { color: #0000FF; }
.TextSegReplacedDiff { color: #0000FF; font-style: italic; }
.TextSegSigDiff { color: #FF0000; }
</style>
<title>Text Compare</title>
</head>
<body>
Text Compare<br/>
Produced: 3/2/2013 5:05:39 PM<br/>
&nbsp; &nbsp;
<br/>
Mode:&nbsp; Differences, With Context &nbsp;
<br/>
Left file: C:\Documents and Settings\Africa\Desktop\Twilio SMS-Notification project for OpenEMR\project\modules\sms_email_reminder\BEFORETWILIO_cron_sms_notification.php &nbsp;
<br/>
Right file: C:\Documents and Settings\Africa\Desktop\Twilio SMS-Notification project for OpenEMR\project\modules\sms_email_reminder\cron_sms_notification.php &nbsp;
<br/>
<table class="fc" cellspacing="0" cellpadding="0">
<tr class="SectionBegin">
<td class="TextItemNum AlignRight">13</td>
<td class="TextItemSame">$_SERVER['REQUEST_URI']=$_SERVER['PHP_SELF'];</td>
<td class="AlignCenter">=</td>
<td class="TextItemNum AlignRight">13</td>
<td class="TextItemSame">$_SERVER['REQUEST_URI']=$_SERVER['PHP_SELF'];</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">14</td>
<td class="TextItemSame">$_SERVER['SERVER_NAME']='localhost';</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">14</td>
<td class="TextItemSame">$_SERVER['SERVER_NAME']='localhost';</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">15</td>
<td class="TextItemSame">$backpic = &quot;&quot;;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">15</td>
<td class="TextItemSame">$backpic = &quot;&quot;;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">16</td>
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">16</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">17</td>
<td class="TextItemSame">// email notification</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">17</td>
<td class="TextItemSame">// email notification</td>
</tr>
<tr class="SectionEnd">
<td class="TextItemNum AlignRight">18</td>
<td class="TextItemSame">$ignoreAuth=1;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">18</td>
<td class="TextItemSame">$ignoreAuth=1;</td>
</tr>
<tr class="SectionBegin">
<td class="TextItemNum AlignRight">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&lt;&gt;</td>
<td class="TextItemNum AlignRight">19</td>
<td class="TextItemSigRightMod"><span class="TextSegSigDiff">//print_r($_SERVER);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">19</td>
<td class="TextItemSigDiffMod">include_once(&quot;<span class="TextSegSigDiff">..</span><span class="TextSegSigDiff">/..</span>/interface/globals.php&quot;);</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">20</td>
<td class="TextItemSigDiffMod">include_once(&quot;<span class="TextSegSigDiff">/var/www/openemr</span>/interface/globals.php&quot;);</td>
</tr>
<tr class="SectionEnd">
<td class="TextItemNum AlignRight">20</td>
<td class="TextItemSigDiffMod">include_once(&quot;cron_functions.php&quot;);</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">21</td>
<td class="TextItemSigDiffMod">include_once(&quot;<span class="TextSegSigDiff">/var/www/openemr/modules/sms_email_reminder/</span>cron_functions.php&quot;);</td>
</tr>
<tr class="SectionBegin">
<td class="TextItemNum AlignRight">21</td>
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">=</td>
<td class="TextItemNum AlignRight">22</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">22</td>
<td class="TextItemSame">// check command line for quite option</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">23</td>
<td class="TextItemSame">// check command line for quite option</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">23</td>
<td class="TextItemSame">$bTestRun = 0;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">24</td>
<td class="TextItemSame">$bTestRun = 0;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">24</td>
<td class="TextItemSame">if( $argc &gt; 1 &amp;&amp; $argv[1] == 'test' ) $bTestRun = 1;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">25</td>
<td class="TextItemSame">if( $argc &gt; 1 &amp;&amp; $argv[1] == 'test' ) $bTestRun = 1;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">25</td>
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">26</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionEnd">
<td class="TextItemNum AlignRight">26</td>
<td class="TextItemSame">$TYPE = &quot;SMS&quot;;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">27</td>
<td class="TextItemSame">$TYPE = &quot;SMS&quot;;</td>
</tr>
<tr class="SectionGap"><td colspan="5">&nbsp;</td></tr>
<tr class="SectionBegin">
<td class="TextItemNum AlignRight">33</td>
<td class="TextItemSame">// larry :: move this in the loop to keep it fresh - perhaps try to use it without change </td>
<td class="AlignCenter">=</td>
<td class="TextItemNum AlignRight">34</td>
<td class="TextItemSame">// larry :: move this in the loop to keep it fresh - perhaps try to use it without change </td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">34</td>
<td class="TextItemSame">// it's content - to do latter</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">35</td>
<td class="TextItemSame">// it's content - to do latter</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">35</td>
<td class="TextItemSame">$db_email_msg = cron_getNotificationData($TYPE);</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">36</td>
<td class="TextItemSame">$db_email_msg = cron_getNotificationData($TYPE);</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">36</td>
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">37</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">37</td>
<td class="TextItemSame">// object for sms</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">38</td>
<td class="TextItemSame">// object for sms</td>
</tr>
<tr class="SectionEnd">
<td class="TextItemNum AlignRight">38</td>
<td class="TextItemSame">global $mysms;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">39</td>
<td class="TextItemSame">global $mysms;</td>
</tr>
<tr class="SectionBegin">
<td class="TextItemNum AlignRight">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">-+</td>
<td class="TextItemNum AlignRight">40</td>
<td class="TextItemSigRightMod"><span class="TextSegSigDiff">$sql=&quot;select</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">*</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">from</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">globals</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">where</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">gl_name</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">in</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">('TWILIO_ACCOUNT_SID','TWILIO_AUTHTOKEN','TWILIO_FROM')&quot;;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">41</td>
<td class="TextItemSigRightMod"><span class="TextSegSigDiff">$q=mysql_query($sql);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">42</td>
<td class="TextItemSigRightMod"><span class="TextSegSigDiff">while($r=mysql_fetch_assoc($q)){</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">43</td>
<td class="TextItemSigRightMod"><span class="TextSegInsigDiff">&nbsp; &nbsp; </span><span class="TextSegSigDiff">if($r['gl_name']=='TWILIO_ACCOUNT_SID')</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">44</td>
<td class="TextItemSigRightMod"><span class="TextSegInsigDiff">&nbsp; &nbsp; </span><span class="TextSegSigDiff">$AccountSid=$r['gl_value'];</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">45</td>
<td class="TextItemSigRightMod"><span class="TextSegInsigDiff">&nbsp; &nbsp; </span><span class="TextSegSigDiff">if($r['gl_name']=='TWILIO_AUTHTOKEN')</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">46</td>
<td class="TextItemSigRightMod"><span class="TextSegInsigDiff">&nbsp; &nbsp; </span><span class="TextSegSigDiff">$AuthToken=$r['gl_value'];</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">47</td>
<td class="TextItemSigRightMod"><span class="TextSegInsigDiff">&nbsp; &nbsp; </span><span class="TextSegSigDiff">if($r['gl_name']=='TWILIO_FROM')</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">48</td>
<td class="TextItemSigRightMod"><span class="TextSegInsigDiff">&nbsp; &nbsp; </span><span class="TextSegSigDiff">$from=$r['gl_value'];</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">49</td>
<td class="TextItemSigRightMod"><span class="TextSegSigDiff">}</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">50</td>
<td class="TextItemSigRightMod"><span class="TextSegSigDiff">if($AccountSid)</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">51</td>
<td class="TextItemSigRightMod"><span class="TextSegSigDiff">{</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">52</td>
<td class="TextItemSigRightMod"><span class="TextSegInsigDiff">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="TextSegSigDiff">include_once(&quot;/var/www/openemr/modules/sms_email_reminder/sendnotifications.php&quot;);</span></td>
</tr>
<tr class="SectionEnd">
<td class="TextItemNum AlignRight">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">53</td>
<td class="TextItemSigRightMod"><span class="TextSegSigDiff">}else</span></td>
</tr>
<tr class="SectionBegin">
<td class="TextItemNum AlignRight">39</td>
<td class="TextItemSame">if( $db_email_msg['sms_gateway_type']=='CLICKATELL' )</td>
<td class="AlignCenter">=</td>
<td class="TextItemNum AlignRight">54</td>
<td class="TextItemSame">if( $db_email_msg['sms_gateway_type']=='CLICKATELL' )</td>
</tr>
<tr class="SectionEnd">
<td class="TextItemNum AlignRight">40</td>
<td class="TextItemSame">{</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">55</td>
<td class="TextItemSame">{</td>
</tr>
<tr class="SectionAll">
<td class="TextItemNum AlignRight">41</td>
<td class="TextItemSigDiffMod">&nbsp; &nbsp; &nbsp; &nbsp; include_once(&quot;sms_clickatell.php&quot;);</td>
<td class="AlignCenter">&lt;&gt;</td>
<td class="TextItemNum AlignRight">56</td>
<td class="TextItemSigDiffMod">&nbsp; &nbsp; &nbsp; &nbsp; include_once(&quot;<span class="TextSegSigDiff">/var/www/openemr/modules/sms_email_reminder/</span>sms_clickatell.php&quot;);</td>
</tr>
<tr class="SectionBegin">
<td class="TextItemNum AlignRight">42</td>
<td class="TextItemSame">&nbsp; &nbsp; &nbsp; &nbsp; </td>
<td class="AlignCenter">=</td>
<td class="TextItemNum AlignRight">57</td>
<td class="TextItemSame">&nbsp; &nbsp; &nbsp; &nbsp; </td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">43</td>
<td class="TextItemSame">}else if($db_email_msg['sms_gateway_type']=='TMB4')</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">58</td>
<td class="TextItemSame">}else if($db_email_msg['sms_gateway_type']=='TMB4')</td>
</tr>
<tr class="SectionEnd">
<td class="TextItemNum AlignRight">44</td>
<td class="TextItemSame">{</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">59</td>
<td class="TextItemSame">{</td>
</tr>
<tr class="SectionBegin">
<td class="TextItemNum AlignRight">45</td>
<td class="TextItemSigDiffMod">&nbsp; &nbsp; &nbsp; &nbsp; include_once(&quot;sms_tmb4.php&quot;);</td>
<td class="AlignCenter">&lt;&gt;</td>
<td class="TextItemNum AlignRight">60</td>
<td class="TextItemSigDiffMod">&nbsp; &nbsp; &nbsp; &nbsp; include_once(&quot;<span class="TextSegSigDiff">/var/www/openemr/modules/sms_email_reminder/</span>sms_tmb4.php&quot;);</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">61</td>
<td class="TextItemSigRightMod"><span class="TextSegSigDiff">}</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">62</td>
<td class="TextItemInsigRightMod">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">63</td>
<td class="TextItemSigRightMod"><span class="TextSegSigDiff">function</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">mysql2dmy($input)</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">{</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">64</td>
<td class="TextItemInsigRightMod">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">65</td>
<td class="TextItemSigRightMod"><span class="TextSegInsigDiff">&nbsp; &nbsp; </span><span class="TextSegSigDiff">$output</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">=</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">false;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">66</td>
<td class="TextItemInsigRightMod">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">67</td>
<td class="TextItemSigRightMod"><span class="TextSegInsigDiff">&nbsp; &nbsp; </span><span class="TextSegSigDiff">$input1</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">=</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">$input;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">68</td>
<td class="TextItemInsigRightMod">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">69</td>
<td class="TextItemSigRightMod"><span class="TextSegInsigDiff">&nbsp; &nbsp; </span><span class="TextSegSigDiff">$input</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">=</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">substr($input,</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">0,</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">10);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">70</td>
<td class="TextItemInsigRightMod">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">71</td>
<td class="TextItemSigRightMod"><span class="TextSegInsigDiff">&nbsp; &nbsp; </span><span class="TextSegSigDiff">$d</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">=</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">explode('-',</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">$input);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">72</td>
<td class="TextItemInsigRightMod">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">73</td>
<td class="TextItemSigRightMod"><span class="TextSegInsigDiff">&nbsp; &nbsp; </span><span class="TextSegSigDiff">if</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">(is_array($d)</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">&amp;&amp;</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">count($d)</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">&gt;=</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">3)</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">{</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">74</td>
<td class="TextItemInsigRightMod">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">75</td>
<td class="TextItemSigRightMod"><span class="TextSegInsigDiff">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="TextSegSigDiff">if</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">(checkdate($d[1],</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">$d[2],</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">$d[0])</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">||</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">($d[2]</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">==</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">&quot;00&quot;</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">&amp;&amp;</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">$d[1]</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">==</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">&quot;00&quot;))</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">{</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">76</td>
<td class="TextItemInsigRightMod">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">77</td>
<td class="TextItemSigRightMod"><span class="TextSegInsigDiff">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="TextSegSigDiff">$output</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">=</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">&quot;$d[2]/$d[1]/$d[0]&quot;;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">78</td>
<td class="TextItemSigRightMod"><span class="TextSegInsigDiff">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="TextSegSigDiff">}</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">79</td>
<td class="TextItemInsigRightMod">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">80</td>
<td class="TextItemSigRightMod"><span class="TextSegInsigDiff">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="TextSegSigDiff">if</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">(substr($input1,</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">11))</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">81</td>
<td class="TextItemSigRightMod"><span class="TextSegInsigDiff">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="TextSegSigDiff">$output.=&quot;</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">&quot;</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">.</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">substr($input1,</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">11);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">82</td>
<td class="TextItemSigRightMod"><span class="TextSegInsigDiff">&nbsp; &nbsp; </span><span class="TextSegSigDiff">}</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">83</td>
<td class="TextItemInsigRightMod">&nbsp;</td>
</tr>
<tr class="SectionEnd">
<td class="TextItemNum AlignRight">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">84</td>
<td class="TextItemSigRightMod"><span class="TextSegInsigDiff">&nbsp; &nbsp; </span><span class="TextSegSigDiff">return</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">$output;</span></td>
</tr>
<tr class="SectionBegin">
<td class="TextItemNum AlignRight">46</td>
<td class="TextItemSame">}</td>
<td class="AlignCenter">=</td>
<td class="TextItemNum AlignRight">85</td>
<td class="TextItemSame">}</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">47</td>
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">86</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">48</td>
<td class="TextItemSame">// get notification settings</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">87</td>
<td class="TextItemSame">// get notification settings</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">49</td>
<td class="TextItemSame">$vectNotificationSettings = cron_GetNotificationSettings( );</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">88</td>
<td class="TextItemSame">$vectNotificationSettings = cron_GetNotificationSettings( );</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">50</td>
<td class="TextItemSame">$SMS_GATEWAY_USENAME = $vectNotificationSettings['SMS_gateway_username'];</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">89</td>
<td class="TextItemSame">$SMS_GATEWAY_USENAME = $vectNotificationSettings['SMS_gateway_username'];</td>
</tr>
<tr class="SectionEnd">
<td class="TextItemNum AlignRight">51</td>
<td class="TextItemSame">$SMS_GATEWAY_PASSWORD = $vectNotificationSettings['SMS_gateway_password'];</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">90</td>
<td class="TextItemSame">$SMS_GATEWAY_PASSWORD = $vectNotificationSettings['SMS_gateway_password'];</td>
</tr>
<tr class="SectionGap"><td colspan="5">&nbsp;</td></tr>
<tr class="SectionBegin">
<td class="TextItemNum AlignRight">53</td>
<td class="TextItemSame">// set cron time (time to event ?) - todo extra tests</td>
<td class="AlignCenter">=</td>
<td class="TextItemNum AlignRight">92</td>
<td class="TextItemSame">// set cron time (time to event ?) - todo extra tests</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">54</td>
<td class="TextItemSame">$CRON_TIME = $vectNotificationSettings['Send_SMS_Before_Hours'];</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">93</td>
<td class="TextItemSame">$CRON_TIME = $vectNotificationSettings['Send_SMS_Before_Hours'];</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">55</td>
<td class="TextItemSame">&nbsp; &nbsp; &nbsp; &nbsp; </td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">94</td>
<td class="TextItemSame">&nbsp; &nbsp; &nbsp; &nbsp; </td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">56</td>
<td class="TextItemSame">//echo &quot;\nDEBUG :: user=&quot;.$vectNotificationSettings['SMS_gateway_username'].&quot;\n&quot;;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">95</td>
<td class="TextItemSame">//echo &quot;\nDEBUG :: user=&quot;.$vectNotificationSettings['SMS_gateway_username'].&quot;\n&quot;;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">57</td>
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">96</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionEnd">
<td class="TextItemNum AlignRight">58</td>
<td class="TextItemSame">// create sms object</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">97</td>
<td class="TextItemSame">// create sms object</td>
</tr>
<tr class="SectionAll">
<td class="TextItemNum AlignRight">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">-+</td>
<td class="TextItemNum AlignRight">98</td>
<td class="TextItemSigRightMod"><span class="TextSegSigDiff">if($AccountSid=='')</span></td>
</tr>
<tr class="SectionBegin">
<td class="TextItemNum AlignRight">59</td>
<td class="TextItemSame">$mysms = new sms( $SMS_GATEWAY_USENAME, $SMS_GATEWAY_PASSWORD, $SMS_GATEWAY_APIKEY );</td>
<td class="AlignCenter">=</td>
<td class="TextItemNum AlignRight">99</td>
<td class="TextItemSame">$mysms = new sms( $SMS_GATEWAY_USENAME, $SMS_GATEWAY_PASSWORD, $SMS_GATEWAY_APIKEY );</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">60</td>
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">100</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">61</td>
<td class="TextItemSame">$db_patient = cron_getAlertpatientData($TYPE);</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">101</td>
<td class="TextItemSame">$db_patient = cron_getAlertpatientData($TYPE);</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">62</td>
<td class="TextItemSame">echo &quot;\n&lt;br&gt;Total &quot;.count($db_patient).&quot; Records Found&quot;;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">102</td>
<td class="TextItemSame">echo &quot;\n&lt;br&gt;Total &quot;.count($db_patient).&quot; Records Found&quot;;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">63</td>
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">103</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionEnd">
<td class="TextItemNum AlignRight">64</td>
<td class="TextItemSame">// for every event found</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">104</td>
<td class="TextItemSame">// for every event found</td>
</tr>
<tr class="SectionGap"><td colspan="5">&nbsp;</td></tr>
<tr class="SectionBegin">
<td class="TextItemNum AlignRight">66</td>
<td class="TextItemSame">{&nbsp; </td>
<td class="AlignCenter">=</td>
<td class="TextItemNum AlignRight">106</td>
<td class="TextItemSame">{&nbsp; </td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">67</td>
<td class="TextItemSame">&nbsp; &nbsp; &nbsp; &nbsp; $prow =$db_patient[$p];</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">107</td>
<td class="TextItemSame">&nbsp; &nbsp; &nbsp; &nbsp; $prow =$db_patient[$p];</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">68</td>
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">108</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">69</td>
<td class="TextItemSame">&nbsp; &nbsp; &nbsp; &nbsp; //echo &quot;\n-----\nDEBUG :cron_sms: found patient = &quot;.$prow['fname'].&quot; &quot;.$prow['lname'].&quot;\n&quot;;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">109</td>
<td class="TextItemSame">&nbsp; &nbsp; &nbsp; &nbsp; //echo &quot;\n-----\nDEBUG :cron_sms: found patient = &quot;.$prow['fname'].&quot; &quot;.$prow['lname'].&quot;\n&quot;;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">70</td>
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">110</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionEnd">
<td class="TextItemNum AlignRight">71</td>
<td class="TextItemSame">&nbsp; &nbsp; &nbsp; &nbsp; // my_print_r($prow);</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">111</td>
<td class="TextItemSame">&nbsp; &nbsp; &nbsp; &nbsp; // my_print_r($prow);</td>
</tr>
<tr class="SectionAll">
<td class="TextItemNum AlignRight">72</td>
<td class="TextItemSigDiffMod">&nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegSigDiff">/*</span></td>
<td class="AlignCenter">&lt;&gt;</td>
<td class="TextItemNum AlignRight">112</td>
<td class="TextItemSigDiffMod">&nbsp; &nbsp; &nbsp; &nbsp; </td>
</tr>
<tr class="SectionBegin">
<td class="TextItemNum AlignRight">73</td>
<td class="TextItemSame">&nbsp; &nbsp; &nbsp; &nbsp; if($prow['pc_eventDate'] &lt; $check_date)</td>
<td class="AlignCenter">=</td>
<td class="TextItemNum AlignRight">113</td>
<td class="TextItemSame">&nbsp; &nbsp; &nbsp; &nbsp; if($prow['pc_eventDate'] &lt; $check_date)</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">74</td>
<td class="TextItemSame">&nbsp; &nbsp; &nbsp; &nbsp; {</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">114</td>
<td class="TextItemSame">&nbsp; &nbsp; &nbsp; &nbsp; {</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">75</td>
<td class="TextItemSame">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $app_date = date(&quot;Y-m-d&quot;).&quot; &quot;.$prow['pc_startTime'];</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">115</td>
<td class="TextItemSame">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $app_date = date(&quot;Y-m-d&quot;).&quot; &quot;.$prow['pc_startTime'];</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">76</td>
<td class="TextItemSame">&nbsp; &nbsp; &nbsp; &nbsp; }else{</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">116</td>
<td class="TextItemSame">&nbsp; &nbsp; &nbsp; &nbsp; }else{</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">77</td>
<td class="TextItemSame">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $app_date = $prow['pc_eventDate'].&quot; &quot;.$prow['pc_startTime'];</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">117</td>
<td class="TextItemSame">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $app_date = $prow['pc_eventDate'].&quot; &quot;.$prow['pc_startTime'];</td>
</tr>
<tr class="SectionEnd">
<td class="TextItemNum AlignRight">78</td>
<td class="TextItemSame">&nbsp; &nbsp; &nbsp; &nbsp; }</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">118</td>
<td class="TextItemSame">&nbsp; &nbsp; &nbsp; &nbsp; }</td>
</tr>
<tr class="SectionAll">
<td class="TextItemNum AlignRight">79</td>
<td class="TextItemSigLeftMod"><span class="TextSegInsigDiff">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="TextSegSigDiff">*/</span></td>
<td class="AlignCenter">+-</td>
<td class="TextItemNum AlignRight">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionBegin">
<td class="TextItemNum AlignRight">80</td>
<td class="TextItemSame">&nbsp; &nbsp; &nbsp; &nbsp; $app_date = $prow['pc_eventDate'].&quot; &quot;.$prow['pc_startTime'];</td>
<td class="AlignCenter">=</td>
<td class="TextItemNum AlignRight">119</td>
<td class="TextItemSame">&nbsp; &nbsp; &nbsp; &nbsp; $app_date = $prow['pc_eventDate'].&quot; &quot;.$prow['pc_startTime'];</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">81</td>
<td class="TextItemSame">&nbsp; &nbsp; &nbsp; &nbsp; $app_time = strtotime($app_date);</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">120</td>
<td class="TextItemSame">&nbsp; &nbsp; &nbsp; &nbsp; $app_time = strtotime($app_date);</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">82</td>
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">121</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">83</td>
<td class="TextItemSame">&nbsp; &nbsp; &nbsp; &nbsp; $app_time_hour = round($app_time/3600);</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">122</td>
<td class="TextItemSame">&nbsp; &nbsp; &nbsp; &nbsp; $app_time_hour = round($app_time/3600);</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">84</td>
<td class="TextItemSame">&nbsp; &nbsp; &nbsp; &nbsp; $curr_total_hour = round(time()/3600);</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">123</td>
<td class="TextItemSame">&nbsp; &nbsp; &nbsp; &nbsp; $curr_total_hour = round(time()/3600);</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">85</td>
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">124</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">86</td>
<td class="TextItemSame">&nbsp; &nbsp; &nbsp; &nbsp; $remaining_app_hour = round($app_time_hour - $curr_total_hour);</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">125</td>
<td class="TextItemSame">&nbsp; &nbsp; &nbsp; &nbsp; $remaining_app_hour = round($app_time_hour - $curr_total_hour);</td>
</tr>
<tr class="SectionEnd">
<td class="TextItemNum AlignRight">87</td>
<td class="TextItemSame">&nbsp; &nbsp; &nbsp; &nbsp; $remain_hour = round($remaining_app_hour - $SMS_NOTIFICATION_HOUR);</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">126</td>
<td class="TextItemSame">&nbsp; &nbsp; &nbsp; &nbsp; $remain_hour = round($remaining_app_hour - $SMS_NOTIFICATION_HOUR);</td>
</tr>
<tr class="SectionAll">
<td class="TextItemNum AlignRight">88</td>
<td class="TextItemInsigLeftMod">&nbsp;</td>
<td class="AlignCenter">+-</td>
<td class="TextItemNum AlignRight">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionBegin">
<td class="TextItemNum AlignRight">89</td>
<td class="TextItemSame">&nbsp; &nbsp; &nbsp; &nbsp; // larry :: debug</td>
<td class="AlignCenter">=</td>
<td class="TextItemNum AlignRight">127</td>
<td class="TextItemSame">&nbsp; &nbsp; &nbsp; &nbsp; // larry :: debug</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">90</td>
<td class="TextItemSame">&nbsp; &nbsp; &nbsp; &nbsp; //echo &quot;\nDEBUG :: checkdate=$check_date, app_date=$app_date, apptime=$app_time remain_hour=$remain_hour -- CRON_TIME=$CRON_TIME\n&quot;;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">128</td>
<td class="TextItemSame">&nbsp; &nbsp; &nbsp; &nbsp; //echo &quot;\nDEBUG :: checkdate=$check_date, app_date=$app_date, apptime=$app_time remain_hour=$remain_hour -- CRON_TIME=$CRON_TIME\n&quot;;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">91</td>
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">129</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">92</td>
<td class="TextItemSame">&nbsp; &nbsp; &nbsp; &nbsp; // build log message</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">130</td>
<td class="TextItemSame">&nbsp; &nbsp; &nbsp; &nbsp; // build log message</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">93</td>
<td class="TextItemSame">&nbsp; &nbsp; &nbsp; &nbsp; $strMsg = &quot;\n========================&quot;.$TYPE.&quot; || &quot;.date(&quot;Y-m-d H:i:s&quot;).&quot;=========================&quot;;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">131</td>
<td class="TextItemSame">&nbsp; &nbsp; &nbsp; &nbsp; $strMsg = &quot;\n========================&quot;.$TYPE.&quot; || &quot;.date(&quot;Y-m-d H:i:s&quot;).&quot;=========================&quot;;</td>
</tr>
<tr class="SectionEnd">
<td class="TextItemNum AlignRight">94</td>
<td class="TextItemSame">&nbsp; &nbsp; &nbsp; &nbsp; $strMsg .= &quot;\nSEND NOTIFICATION BEFORE:&quot;.$SMS_NOTIFICATION_HOUR.&quot; || CRONJOB RUN EVERY:&quot;.$CRON_TIME.&quot; || APPDATETIME:&quot;.$app_date.&quot; || REMAINING APP HOUR:&quot;.($remaining_app_hour).&quot; || SEND ALERT AFTER:&quot;.($remain_hour);</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">132</td>
<td class="TextItemSame">&nbsp; &nbsp; &nbsp; &nbsp; $strMsg .= &quot;\nSEND NOTIFICATION BEFORE:&quot;.$SMS_NOTIFICATION_HOUR.&quot; || CRONJOB RUN EVERY:&quot;.$CRON_TIME.&quot; || APPDATETIME:&quot;.$app_date.&quot; || REMAINING APP HOUR:&quot;.($remaining_app_hour).&quot; || SEND ALERT AFTER:&quot;.($remain_hour);</td>
</tr>
<tr class="SectionGap"><td colspan="5">&nbsp;</td></tr>
<tr class="SectionBegin">
<td class="TextItemNum AlignRight">97</td>
<td class="TextItemSame">&nbsp; &nbsp; &nbsp; &nbsp; if( $remain_hour &gt;= -($CRON_TIME) &amp;&amp;&nbsp; $remain_hour &lt;= $CRON_TIME )</td>
<td class="AlignCenter">=</td>
<td class="TextItemNum AlignRight">135</td>
<td class="TextItemSame">&nbsp; &nbsp; &nbsp; &nbsp; if( $remain_hour &gt;= -($CRON_TIME) &amp;&amp;&nbsp; $remain_hour &lt;= $CRON_TIME )</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">98</td>
<td class="TextItemSame">&nbsp; &nbsp; &nbsp; &nbsp; {</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">136</td>
<td class="TextItemSame">&nbsp; &nbsp; &nbsp; &nbsp; {</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">99</td>
<td class="TextItemSame">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // insert entry in notification_log table</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">137</td>
<td class="TextItemSame">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // insert entry in notification_log table</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">100</td>
<td class="TextItemSame">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; cron_InsertNotificationLogEntry($TYPE,$prow,$db_email_msg);</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">138</td>
<td class="TextItemSame">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; cron_InsertNotificationLogEntry($TYPE,$prow,$db_email_msg);</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">101</td>
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">139</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionEnd">
<td class="TextItemNum AlignRight">102</td>
<td class="TextItemSame">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //set message </td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">140</td>
<td class="TextItemSame">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //set message </td>
</tr>
<tr class="SectionAll">
<td class="TextItemNum AlignRight">103</td>
<td class="TextItemSigDiffMod">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $db_email_msg['message'] = cron_setmessage($prow,$db_email_msg);</td>
<td class="AlignCenter">&lt;&gt;</td>
<td class="TextItemNum AlignRight">141</td>
<td class="TextItemSigDiffMod">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $db_email_msg['message'] = <span class="TextSegSigDiff">&quot;This</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">is</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">a</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">reminder</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">of</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">your</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">appointment</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">with</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">Vijay</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">Optica</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">on</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">&quot;.mysql2dmy($app_date).&quot;.</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">Thank</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">you.&quot;;//</span>cron_setmessage($prow,$db_email_msg);</td>
</tr>
<tr class="SectionBegin">
<td class="TextItemNum AlignRight">104</td>
<td class="TextItemSame">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </td>
<td class="AlignCenter">=</td>
<td class="TextItemNum AlignRight">142</td>
<td class="TextItemSame">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </td>
</tr>
<tr class="SectionEnd">
<td class="TextItemNum AlignRight">105</td>
<td class="TextItemSame">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // send sms to patinet - if not in test mode</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">143</td>
<td class="TextItemSame">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // send sms to patinet - if not in test mode</td>
</tr>
<tr class="SectionBegin">
<td class="TextItemNum AlignRight">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&lt;&gt;</td>
<td class="TextItemNum AlignRight">144</td>
<td class="TextItemSigRightMod"><span class="TextSegInsigDiff">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="TextSegSigDiff">//echo</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">$AccountSid;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">145</td>
<td class="TextItemSigRightMod"><span class="TextSegInsigDiff">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="TextSegSigDiff">if($AccountSid){</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">146</td>
<td class="TextItemSigRightMod"><span class="TextSegInsigDiff">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="TextSegSigDiff">$people=array(</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">147</td>
<td class="TextItemSigRightMod"><span class="TextSegInsigDiff">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="TextSegSigDiff">$prow['phone_cell']=&gt;&quot;Patient&quot;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">148</td>
<td class="TextItemSigRightMod"><span class="TextSegInsigDiff">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="TextSegSigDiff">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">149</td>
<td class="TextItemSigRightMod"><span class="TextSegInsigDiff">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="TextSegSigDiff">$body=$db_email_msg['message'];</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">150</td>
<td class="TextItemSigRightMod"><span class="TextSegInsigDiff">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="TextSegSigDiff">sendtsms($AccountSid,</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">$AuthToken,</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">$from,</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">$people,</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">$body);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">151</td>
<td class="TextItemSigRightMod"><span class="TextSegInsigDiff">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="TextSegSigDiff">}</span></td>
</tr>
<tr class="SectionEnd">
<td class="TextItemNum AlignRight">106</td>
<td class="TextItemSigDiffMod">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if( $bTestRun == 0 )</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">152</td>
<td class="TextItemSigDiffMod">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegSigDiff">else</span>if( $bTestRun == 0 )</td>
</tr>
<tr class="SectionBegin">
<td class="TextItemNum AlignRight">107</td>
<td class="TextItemSame">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {</td>
<td class="AlignCenter">=</td>
<td class="TextItemNum AlignRight">153</td>
<td class="TextItemSame">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">108</td>
<td class="TextItemSame">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; cron_SendSMS( $prow['phone_cell'], $db_email_msg['email_subject'], </td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">154</td>
<td class="TextItemSame">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; cron_SendSMS( $prow['phone_cell'], $db_email_msg['email_subject'], </td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">109</td>
<td class="TextItemSame">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $db_email_msg['message'], $db_email_msg['email_sender'] );</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">155</td>
<td class="TextItemSame">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $db_email_msg['message'], $db_email_msg['email_sender'] );</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">110</td>
<td class="TextItemSame">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">156</td>
<td class="TextItemSame">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemNum AlignRight">111</td>
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">157</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionEnd">
<td class="TextItemNum AlignRight">112</td>
<td class="TextItemSame">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // larry :: debug</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemNum AlignRight">158</td>
<td class="TextItemSame">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // larry :: debug</td>
</tr>
</table>
<br/>
</body>
</html>
